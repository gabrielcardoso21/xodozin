import{c as cn}from"./chunk-DK4WIVY6-CYCbBMOO.js";import{r as u,cr as un,cK as me,cL as dn,cM as ve,bm as fn,j as d,ba as at,g as hn,Z as q,$ as _e,ak as Ke,an as mn,F as pn,c8 as St,bB as gn,bE as bn,bH as Et,cN as vn,cO as wn,a3 as xn,b as ue,cP as V,z as Cn,by as pe,cQ as yn,B as ge,cR as _n,cS as Sn,cT as En,cU as jn,cV as kn,cW as Mn,cX as Dn,H as In,cY as On,bS as ct,cZ as zn,a0 as Nn,a7 as An,K as Fn,a4 as Pn}from"./index-CxEVKbDQ.js";var Rn=Object.defineProperty,we=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,ut=(e,t,n)=>t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tn=(e,t)=>{for(var n in t||(t={}))jt.call(t,n)&&ut(e,n,t[n]);if(we)for(var n of we(t))kt.call(t,n)&&ut(e,n,t[n]);return e},Gn=(e,t)=>{var n={};for(var s in e)jt.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&we)for(var s of we(e))t.indexOf(s)<0&&kt.call(e,s)&&(n[s]=e[s]);return n};const Mt=u.forwardRef((e,t)=>{var n=e,{color:s="currentColor"}=n,r=Gn(n,["color"]);return u.createElement("svg",Tn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:t},r),u.createElement("g",{clipPath:"url(#a)"},u.createElement("path",{fill:s,d:"M8.5 2.528h-.778a.75.75 0 1 0 0 1.5h1.08a4 4 0 0 1-.302-1.5M10.695 6.07a4 4 0 0 1-1.21-.94.75.75 0 0 0-.29.592V6.75H1.5a.75.75 0 0 0 0 1.5h7.694v1.028a.75.75 0 0 0 1.5 0zM5.806 1.5a.75.75 0 1 0-1.5 0v1.028H1.5a.75.75 0 0 0 0 1.5h2.806v1.028a.75.75 0 0 0 1.5 0V1.5M12.611 6.75a.75.75 0 0 0 0 1.5h.889a.75.75 0 0 0 0-1.5zM6.972 11.722a.75.75 0 0 1 .75-.75H13.5a.75.75 0 1 1 0 1.5H7.722a.75.75 0 0 1-.75-.75M1.5 10.972a.75.75 0 0 0 0 1.5h2.806V13.5a.75.75 0 0 0 1.5 0V9.944a.75.75 0 1 0-1.5 0v1.028z"}),u.createElement("circle",{cx:12.5,cy:2.5,r:2.5,fill:"#2563EB"}),u.createElement("circle",{cx:12.5,cy:2.5,r:2.25,stroke:s,strokeOpacity:.24,strokeWidth:.5})),u.createElement("defs",null,u.createElement("clipPath",{id:"a"},u.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});Mt.displayName="AdjustmentsDone";var $n=Object.defineProperty,xe=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable,dt=(e,t,n)=>t in e?$n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wn=(e,t)=>{for(var n in t||(t={}))Dt.call(t,n)&&dt(e,n,t[n]);if(xe)for(var n of xe(t))It.call(t,n)&&dt(e,n,t[n]);return e},Kn=(e,t)=>{var n={};for(var s in e)Dt.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&xe)for(var s of xe(e))t.indexOf(s)<0&&It.call(e,s)&&(n[s]=e[s]);return n};const Ot=u.forwardRef((e,t)=>{var n=e,{color:s="currentColor"}=n,r=Kn(n,["color"]);return u.createElement("svg",Wn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:t},r),u.createElement("path",{fill:s,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.823-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.924 4.678a.11.11 0 0 0-.056.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.41c.414 0 .78.344.78.759 0 .414-.366.741-.78.741H2.117a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75M9.338 8.72a.75.75 0 0 1 1.06 0l1.623 1.622 1.622-1.622a.75.75 0 1 1 1.06 1.06l-1.621 1.623 1.622 1.622a.75.75 0 0 1-1.06 1.061l-1.623-1.623-1.623 1.623a.75.75 0 0 1-1.06-1.06l1.622-1.623L9.338 9.78a.75.75 0 0 1 0-1.06",clipRule:"evenodd"}),u.createElement("path",{fill:s,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});Ot.displayName="TaxExclusive";var Vn=Object.defineProperty,Ce=Object.getOwnPropertySymbols,zt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,ft=(e,t,n)=>t in e?Vn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hn=(e,t)=>{for(var n in t||(t={}))zt.call(t,n)&&ft(e,n,t[n]);if(Ce)for(var n of Ce(t))Nt.call(t,n)&&ft(e,n,t[n]);return e},Ln=(e,t)=>{var n={};for(var s in e)zt.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Ce)for(var s of Ce(e))t.indexOf(s)<0&&Nt.call(e,s)&&(n[s]=e[s]);return n};const At=u.forwardRef((e,t)=>{var n=e,{color:s="currentColor"}=n,r=Ln(n,["color"]);return u.createElement("svg",Hn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:t},r),u.createElement("path",{fill:s,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.824-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.925 4.678a.11.11 0 0 0-.057.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.346c.414 0 .812.337.812.75 0 .415-.398.75-.812.75H2.118a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75m6.028 0a.75.75 0 0 1 .75.75v1.292a.75.75 0 0 1-1.5 0V8.146a.75.75 0 0 1 .75-.75m5.588.733a.75.75 0 0 1 .2 1.042l-3.215 4.736a.75.75 0 0 1-1.16.1l-1.522-1.579a.75.75 0 0 1 1.08-1.041l.88.913 2.695-3.971a.75.75 0 0 1 1.042-.2",clipRule:"evenodd"}),u.createElement("path",{fill:s,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});At.displayName="TaxInclusive";var Bn="Expected a function",Ft="__lodash_hash_undefined__",Un=9007199254740991,Zn="[object Function]",Yn="[object GeneratorFunction]",Qn="[object Symbol]",Xn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jn=/^\w*$/,qn=/^\./,es=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ts=/[\\^$.*+?()[\]{}|]/g,ns=/\\(\\)?/g,ss=/^\[object .+?Constructor\]$/,rs=/^(?:0|[1-9]\d*)$/,ls=typeof me=="object"&&me&&me.Object===Object&&me,os=typeof self=="object"&&self&&self.Object===Object&&self,Ve=ls||os||Function("return this")();function is(e,t){return e==null?void 0:e[t]}function as(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var cs=Array.prototype,us=Function.prototype,Pt=Object.prototype,Ge=Ve["__core-js_shared__"],ht=function(){var e=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Rt=us.toString,Se=Pt.hasOwnProperty,Tt=Pt.toString,ds=RegExp("^"+Rt.call(Se).replace(ts,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=Ve.Symbol,fs=cs.splice,hs=Gt(Ve,"Map"),ce=Gt(Object,"create"),pt=mt?mt.prototype:void 0,gt=pt?pt.toString:void 0;function se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function ms(){this.__data__=ce?ce(null):{}}function ps(e){return this.has(e)&&delete this.__data__[e]}function gs(e){var t=this.__data__;if(ce){var n=t[e];return n===Ft?void 0:n}return Se.call(t,e)?t[e]:void 0}function bs(e){var t=this.__data__;return ce?t[e]!==void 0:Se.call(t,e)}function vs(e,t){var n=this.__data__;return n[e]=ce&&t===void 0?Ft:t,this}se.prototype.clear=ms;se.prototype.delete=ps;se.prototype.get=gs;se.prototype.has=bs;se.prototype.set=vs;function ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function ws(){this.__data__=[]}function xs(e){var t=this.__data__,n=Ee(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():fs.call(t,n,1),!0}function Cs(e){var t=this.__data__,n=Ee(t,e);return n<0?void 0:t[n][1]}function ys(e){return Ee(this.__data__,e)>-1}function _s(e,t){var n=this.__data__,s=Ee(n,e);return s<0?n.push([e,t]):n[s][1]=t,this}ae.prototype.clear=ws;ae.prototype.delete=xs;ae.prototype.get=Cs;ae.prototype.has=ys;ae.prototype.set=_s;function re(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function Ss(){this.__data__={hash:new se,map:new(hs||ae),string:new se}}function Es(e){return je(this,e).delete(e)}function js(e){return je(this,e).get(e)}function ks(e){return je(this,e).has(e)}function Ms(e,t){return je(this,e).set(e,t),this}re.prototype.clear=Ss;re.prototype.delete=Es;re.prototype.get=js;re.prototype.has=ks;re.prototype.set=Ms;function Ds(e,t,n){var s=e[t];(!(Se.call(e,t)&&$t(s,n))||n===void 0&&!(t in e))&&(e[t]=n)}function Ee(e,t){for(var n=e.length;n--;)if($t(e[n][0],t))return n;return-1}function Is(e){if(!ye(e)||Rs(e))return!1;var t=Ws(e)||as(e)?ds:ss;return t.test($s(e))}function Os(e,t,n,s){if(!ye(e))return e;t=Fs(t,e)?[t]:Ns(t);for(var r=-1,l=t.length,i=l-1,o=e;o!=null&&++r<l;){var c=Gs(t[r]),f=n;if(r!=i){var a=o[c];f=void 0,f===void 0&&(f=ye(a)?a:As(t[r+1])?[]:{})}Ds(o,c,f),o=o[c]}return e}function zs(e){if(typeof e=="string")return e;if(Le(e))return gt?gt.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Ns(e){return Wt(e)?e:Ts(e)}function je(e,t){var n=e.__data__;return Ps(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Gt(e,t){var n=is(e,t);return Is(n)?n:void 0}function As(e,t){return t=t??Un,!!t&&(typeof e=="number"||rs.test(e))&&e>-1&&e%1==0&&e<t}function Fs(e,t){if(Wt(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Le(e)?!0:Jn.test(e)||!Xn.test(e)||t!=null&&e in Object(t)}function Ps(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Rs(e){return!!ht&&ht in e}var Ts=He(function(e){e=Vs(e);var t=[];return qn.test(e)&&t.push(""),e.replace(es,function(n,s,r,l){t.push(r?l.replace(ns,"$1"):s||n)}),t});function Gs(e){if(typeof e=="string"||Le(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function $s(e){if(e!=null){try{return Rt.call(e)}catch{}try{return e+""}catch{}}return""}function He(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(Bn);var n=function(){var s=arguments,r=t?t.apply(this,s):s[0],l=n.cache;if(l.has(r))return l.get(r);var i=e.apply(this,s);return n.cache=l.set(r,i),i};return n.cache=new(He.Cache||re),n}He.Cache=re;function $t(e,t){return e===t||e!==e&&t!==t}var Wt=Array.isArray;function Ws(e){var t=ye(e)?Tt.call(e):"";return t==Zn||t==Yn}function ye(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ks(e){return!!e&&typeof e=="object"}function Le(e){return typeof e=="symbol"||Ks(e)&&Tt.call(e)==Qn}function Vs(e){return e==null?"":zs(e)}function Hs(e,t,n){return e==null?e:Os(e,t,n)}var Ls=Hs;const Kt=un(Ls);var Bs=function(e){var t=e.as,n=e.errors,s=e.name,r=e.message,l=e.render,i=function(h,v){if(h==null)return{};var b,p,x={},y=Object.keys(h);for(p=0;p<y.length;p++)v.indexOf(b=y[p])>=0||(x[b]=h[b]);return x}(e,["as","errors","name","message","render"]),o=dn(),c=ve(n||o.formState.errors,s);if(!c)return null;var f=c.message,a=c.types,m=Object.assign({},i,{children:f||r});return u.isValidElement(t)?u.cloneElement(t,m):l?l({message:f||r,messages:a}):u.createElement(t||u.Fragment,m)};function oe(e,t,n){let s=n.initialDeps??[],r;function l(){var i,o,c,f;let a;n.key&&((i=n.debug)!=null&&i.call(n))&&(a=Date.now());const m=e();if(!(m.length!==s.length||m.some((b,p)=>s[p]!==b)))return r;s=m;let v;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(v=Date.now()),r=t(...m),n.key&&((c=n.debug)!=null&&c.call(n))){const b=Math.round((Date.now()-a)*100)/100,p=Math.round((Date.now()-v)*100)/100,x=p/16,y=(_,w)=>{for(_=String(_);_.length<w;)_=" "+_;return _};console.info(`%câ± ${y(p,5)} /${y(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(f=n==null?void 0:n.onChange)==null||f.call(n,r),r}return l.updateDeps=i=>{s=i},l}function bt(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const Us=(e,t)=>Math.abs(e-t)<1.01,Zs=(e,t,n)=>{let s;return function(...r){e.clearTimeout(s),s=e.setTimeout(()=>t.apply(this,r),n)}},vt=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},Ys=e=>e,Qs=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let r=t;r<=n;r++)s.push(r);return s},Xs=(e,t)=>{const n=e.scrollElement;if(!n)return;const s=e.targetWindow;if(!s)return;const r=i=>{const{width:o,height:c}=i;t({width:Math.round(o),height:Math.round(c)})};if(r(vt(n)),!s.ResizeObserver)return()=>{};const l=new s.ResizeObserver(i=>{const o=()=>{const c=i[0];if(c!=null&&c.borderBoxSize){const f=c.borderBoxSize[0];if(f){r({width:f.inlineSize,height:f.blockSize});return}}r(vt(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return l.observe(n,{box:"border-box"}),()=>{l.unobserve(n)}},wt={passive:!0},xt=typeof window>"u"?!0:"onscrollend"in window,Js=(e,t)=>{const n=e.scrollElement;if(!n)return;const s=e.targetWindow;if(!s)return;let r=0;const l=e.options.useScrollendEvent&&xt?()=>{}:Zs(s,()=>{t(r,!1)},e.options.isScrollingResetDelay),i=a=>()=>{const{horizontal:m,isRtl:h}=e.options;r=m?n.scrollLeft*(h&&-1||1):n.scrollTop,l(),t(r,a)},o=i(!0),c=i(!1);c(),n.addEventListener("scroll",o,wt);const f=e.options.useScrollendEvent&&xt;return f&&n.addEventListener("scrollend",c,wt),()=>{n.removeEventListener("scroll",o),f&&n.removeEventListener("scrollend",c)}},qs=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const s=t.borderBoxSize[0];if(s)return Math.round(s[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},er=(e,{adjustments:t=0,behavior:n},s)=>{var r,l;const i=e+t;(l=(r=s.scrollElement)==null?void 0:r.scrollTo)==null||l.call(r,{[s.options.horizontal?"left":"top"]:i,behavior:n})};class tr{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const s=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(r=>{r.forEach(l=>{const i=()=>{this._measureElement(l.target,l)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var r;(r=s())==null||r.disconnect(),n=null},observe:r=>{var l;return(l=s())==null?void 0:l.observe(r,{box:"border-box"})},unobserve:r=>{var l;return(l=s())==null?void 0:l.unobserve(r)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([s,r])=>{typeof r>"u"&&delete n[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ys,rangeExtractor:Qs,onChange:()=>{},measureElement:qs,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var s,r;(r=(s=this.options).onChange)==null||r.call(s,this,n)},this.maybeNotify=oe(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,s)=>{const r=new Map,l=new Map;for(let i=s-1;i>=0;i--){const o=n[i];if(r.has(o.lane))continue;const c=l.get(o.lane);if(c==null||o.end>c.end?l.set(o.lane,o):o.end<c.end&&r.set(o.lane,!0),r.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((i,o)=>i.end===o.end?i.index-o.index:i.end-o.end)[0]:void 0},this.getMeasurementOptions=oe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,s,r,l,i)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:s,scrollMargin:r,getItemKey:l,enabled:i}),{key:!1}),this.getMeasurements=oe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:s,scrollMargin:r,getItemKey:l,enabled:i},o)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(a=>{this.itemSizeCache.set(a.key,a.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const f=this.measurementsCache.slice(0,c);for(let a=c;a<n;a++){const m=l(a),h=this.options.lanes===1?f[a-1]:this.getFurthestMeasurement(f,a),v=h?h.end+this.options.gap:s+r,b=o.get(m),p=typeof b=="number"?b:this.options.estimateSize(a),x=v+p,y=h?h.lane:a%this.options.lanes;f[a]={index:a,start:v,size:p,end:x,key:m,lane:y}}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=oe(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,s,r,l)=>this.range=n.length>0&&s>0?nr({measurements:n,outerSize:s,scrollOffset:r,lanes:l}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=oe(()=>{let n=null,s=null;const r=this.calculateRange();return r&&(n=r.startIndex,s=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,s]},(n,s,r,l,i)=>l===null||i===null?[]:n({startIndex:l,endIndex:i,overscan:s,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const s=this.options.indexAttribute,r=n.getAttribute(s);return r?parseInt(r,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(n,s)=>{const r=this.indexFromElement(n),l=this.measurementsCache[r];if(!l)return;const i=l.key,o=this.elementsCache.get(i);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(i,n)),n.isConnected&&this.resizeItem(r,this.options.measureElement(n,s,this))},this.resizeItem=(n,s)=>{const r=this.measurementsCache[n];if(!r)return;const l=this.itemSizeCache.get(r.key)??r.size,i=s-l;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,i,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,s)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((s,r)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(r))});return}this._measureElement(n,void 0)},this.getVirtualItems=oe(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,s)=>{const r=[];for(let l=0,i=n.length;l<i;l++){const o=n[l],c=s[o];r.push(c)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const s=this.getMeasurements();if(s.length!==0)return bt(s[Vt(0,s.length-1,r=>bt(s[r]).start,n)])},this.getOffsetForAlignment=(n,s,r=0)=>{const l=this.getSize(),i=this.getScrollOffset();s==="auto"&&(s=n>=i+l?"end":"start"),s==="center"?n+=(r-l)/2:s==="end"&&(n-=l);const o=this.getTotalSize()+this.options.scrollMargin-l;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,s="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const r=this.measurementsCache[n];if(!r)return;const l=this.getSize(),i=this.getScrollOffset();if(s==="auto")if(r.end>=i+l-this.options.scrollPaddingEnd)s="end";else if(r.start<=i+this.options.scrollPaddingStart)s="start";else return[i,s];const o=s==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,s,r.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:s="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,s),{adjustments:void 0,behavior:r})},this.scrollToIndex=(n,{align:s="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let l=0;const i=10,o=f=>{if(!this.targetWindow)return;const a=this.getOffsetForIndex(n,f);if(!a){console.warn("Failed to get offset for index:",n);return}const[m,h]=a;this._scrollToOffset(m,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const v=this.getScrollOffset(),b=this.getOffsetForIndex(n,h);if(!b){console.warn("Failed to get offset for index:",n);return}Us(b[0],v)||c(h)})},c=f=>{this.targetWindow&&(l++,l<i?this.targetWindow.requestAnimationFrame(()=>o(f)):console.warn(`Failed to scroll to index ${n} after ${i} attempts.`))};o(s)},this.scrollBy=(n,{behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var n;const s=this.getMeasurements();let r;if(s.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((n=s[s.length-1])==null?void 0:n.end)??0;else{const l=Array(this.options.lanes).fill(null);let i=s.length-1;for(;i>=0&&l.some(o=>o===null);){const o=s[i];l[o.lane]===null&&(l[o.lane]=o.end),i--}r=Math.max(...l.filter(o=>o!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:s,behavior:r})=>{this.options.scrollToFn(n,{behavior:r,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const Vt=(e,t,n,s)=>{for(;e<=t;){const r=(e+t)/2|0,l=n(r);if(l<s)e=r+1;else if(l>s)t=r-1;else return r}return e>0?e-1:0};function nr({measurements:e,outerSize:t,scrollOffset:n,lanes:s}){const r=e.length-1,l=c=>e[c].start;if(e.length<=s)return{startIndex:0,endIndex:r};let i=Vt(0,r,l,n),o=i;if(s===1)for(;o<r&&e[o].end<n+t;)o++;else if(s>1){const c=Array(s).fill(0);for(;o<r&&c.some(a=>a<n+t);){const a=e[o];c[a.lane]=a.end,o++}const f=Array(s).fill(n+t);for(;i>=0&&f.some(a=>a>=n);){const a=e[i];f[a.lane]=a.start,i--}i=Math.max(0,i-i%s),o=Math.min(r,o+(s-1-o%s))}return{startIndex:i,endIndex:o}}const Ct=typeof document<"u"?u.useLayoutEffect:u.useEffect;function sr(e){const t=u.useReducer(()=>({}),{})[1],n={...e,onChange:(r,l)=>{var i;l?fn.flushSync(t):t(),(i=e.onChange)==null||i.call(e,r,l)}},[s]=u.useState(()=>new tr(n));return s.setOptions(n),Ct(()=>s._didMount(),[]),Ct(()=>s._willUpdate()),s}function yt(e){return sr({observeElementRect:Xs,observeElementOffset:Js,scrollToFn:er,...e})}var rr=({columns:e,rows:t=10})=>{const n=Array.from({length:t},(r,l)=>l),s=e.length;return d.jsxs("div",{className:"bg-ui-bg-subtle size-full",children:[d.jsx("div",{className:"bg-ui-bg-base border-b p-4",children:d.jsx("div",{className:"bg-ui-button-neutral h-7 w-[116px] animate-pulse rounded-md"})}),d.jsxs("div",{className:"bg-ui-bg-subtle size-full overflow-auto",children:[d.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${s}, 1fr)`},children:e.map((r,l)=>d.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:d.jsx(at,{className:"h-[14px] w-[164px]"})},l))}),d.jsx("div",{children:n.map((r,l)=>d.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${s}, 1fr)`},children:e.map((i,o)=>d.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:d.jsx(at,{className:"h-[14px] w-[164px]"})},o))},l))})]})]})};function lr(e,t){typeof e=="function"?e(t):e&&"current"in e&&(e.current=t)}var ke=(...e)=>t=>{e.forEach(n=>lr(n,t))},Ht=u.createContext(null),Be=()=>{const e=u.useContext(Ht);if(!e)throw new Error("useDataGridContext must be used within a DataGridContextProvider");return e};function Lt(e){return`${e.row}:${e.col}`}function Bt(e,t){return t?e.row===t.row&&e.col===t.col:!1}var or=[".",","];function Ut(e){return or.includes(e.key)&&e.ctrlKey&&e.altKey}var ir=/^.$/u,ar=/^[0-9]$/u,Me=({context:e})=>{const{register:t,control:n,anchor:s,setIsEditing:r,setSingleRange:l,setIsSelecting:i,setRangeEnd:o,getWrapperFocusHandler:c,getWrapperMouseOverHandler:f,getInputChangeHandler:a,getIsCellSelected:m,getIsCellDragSelected:h,getCellMetadata:v}=Be(),{rowIndex:b,columnIndex:p}=e,x=u.useMemo(()=>({row:b,col:p}),[b,p]),{id:y,field:_,type:w,innerAttributes:I,inputAttributes:S}=u.useMemo(()=>v(x),[x,v]),[O,G]=u.useState(!0),T=u.useRef(null),P=u.useRef(null),U=u.useCallback(E=>{if(E.preventDefault(),E.stopPropagation(),E.detail===2&&P.current){G(!1),P.current.focus();return}if(E.shiftKey&&x.col===(s==null?void 0:s.col)){o(x);return}T.current&&(l(x),i(!0),T.current.focus())},[x,s,o,l,i]),Z=u.useCallback(E=>{var R;if(E.preventDefault(),E.stopPropagation(),E.detail===2){(R=P.current)==null||R.focus();return}if(E.shiftKey){o(x);return}T.current&&(l(x),i(!0),T.current.focus())},[i,l,o,x]),ee=u.useCallback(()=>{G(!0),r(!1)},[r]),te=u.useCallback(()=>{G(!1),r(!0)},[r]),ne=u.useCallback(E=>{switch(w){case"togglable-number":case"number":return ar.test(E);case"text":return ir.test(E);default:return!1}},[w]),Y=u.useCallback(E=>{var R;if(!(!P.current||!ne(E.key)||!O)&&!(E.key.toLowerCase()==="z"&&(E.ctrlKey||E.metaKey))&&!(E.key.toLowerCase()==="c"&&(E.ctrlKey||E.metaKey))&&!(E.key.toLowerCase()==="v"&&(E.ctrlKey||E.metaKey))&&E.key!=="Enter"&&!Ut(E.nativeEvent)){if(P.current.focus(),G(!1),P.current instanceof HTMLInputElement){P.current.value="";const Q=(R=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:R.set;Q==null||Q.call(P.current,E.key);const X=new Event("input",{bubbles:!0});P.current.dispatchEvent(X)}E.stopPropagation(),E.preventDefault()}},[O,ne]),L=u.useMemo(()=>s?Bt(x,s):!1,[s,x]),H=u.useMemo(()=>w==="boolean",[w]);u.useEffect(()=>{var E,R;L&&!((E=T.current)!=null&&E.contains(document.activeElement))&&((R=T.current)==null||R.focus())},[L]);const le={container:{field:_,isAnchor:L,isSelected:m(x),isDragSelected:h(x),showOverlay:H?!1:O,innerProps:{ref:T,onMouseOver:f(x),onMouseDown:w==="boolean"?Z:void 0,onKeyDown:Y,onFocus:c(x),...I},overlayProps:{onMouseDown:U}},input:{ref:P,onBlur:ee,onFocus:te,onChange:a(_),...S}};return{id:y,field:_,register:t,control:n,renderProps:le}},de=({context:e})=>{const{errors:t,getCellErrorMetadata:n,navigateToField:s}=Be(),{rowIndex:r,columnIndex:l}=e,{accessor:i,field:o}=u.useMemo(()=>n({row:r,col:l}),[r,l,n]),c=i&&l===0?ve(t,i):void 0,f=[];function a(h,v){if(h)if(cr(h)){const b=h.message,p=()=>s(v);b&&f.push({message:b,to:p})}else Object.keys(h).forEach(b=>{const p=h[b],x=`${v}.${b}`;p&&typeof p=="object"&&a(p,x)})}c&&i&&a(c,i);const m=o?ve(t,o):void 0;return{errors:t,rowErrors:f,cellError:m}};function cr(e){return typeof e=="object"&&"message"in e&&"type"in e}var ie=class{constructor({fields:e,prev:t,next:n,setter:s}){V(this,"_fields"),V(this,"_prev"),V(this,"_next"),V(this,"_setter"),this._fields=e,this._prev=t,this._next=n,this._setter=s}execute(e=!1){this._setter(this._fields,this._next,e)}undo(){this._setter(this._fields,this._prev,!0)}redo(){this.execute(!0)}},ur=class{constructor(e,t,n=!1){V(this,"multiColumnSelection"),V(this,"cells"),V(this,"rowAccessors",[]),V(this,"columnAccessors",[]),this.multiColumnSelection=n,this.cells=this._populateCells(e,t),this.rowAccessors=this._computeRowAccessors(),this.columnAccessors=this._computeColumnAccessors()}_computeRowAccessors(){return this.cells.map((e,t)=>this.getRowAccessor(t))}_computeColumnAccessors(){return this.cells.length===0?[]:this.cells[0].map((e,t)=>this.getColumnAccessor(t))}getFirstNavigableCell(){for(let e=0;e<this.cells.length;e++)for(let t=0;t<this.cells[0].length;t++)if(this.cells[e][t]!==null)return{row:e,col:t};return null}getFieldsInRow(e){const t=[];return e<0||e>=this.cells.length||this.cells[e].forEach(n=>{n!==null&&t.push(n.field)}),t}getFieldsInSelection(e,t){var o;const n=[];if(!e||!t)return n;if(!this.multiColumnSelection&&e.col!==t.col)throw new Error("Selection must be in the same column when multiColumnSelection is disabled");const s=Math.min(e.row,t.row),r=Math.max(e.row,t.row),l=this.multiColumnSelection?Math.min(e.col,t.col):e.col,i=this.multiColumnSelection?Math.max(e.col,t.col):e.col;for(let c=s;c<=r;c++)for(let f=l;f<=i;f++)this._isValidPosition(c,f)&&this.cells[c][f]!==null&&n.push((o=this.cells[c][f])==null?void 0:o.field);return n}getCellField(e){var t;return this._isValidPosition(e.row,e.col)&&((t=this.cells[e.row][e.col])==null?void 0:t.field)||null}getCellType(e){var t;return this._isValidPosition(e.row,e.col)&&((t=this.cells[e.row][e.col])==null?void 0:t.type)||null}getIsCellSelected(e,t,n){if(!e||!t||!n)return!1;if(!this.multiColumnSelection&&t.col!==n.col)throw new Error("Selection must be in the same column when multiColumnSelection is disabled");const s=Math.min(t.row,n.row),r=Math.max(t.row,n.row),l=this.multiColumnSelection?Math.min(t.col,n.col):t.col,i=this.multiColumnSelection?Math.max(t.col,n.col):t.col;return e.row>=s&&e.row<=r&&e.col>=l&&e.col<=i}toggleColumn(e,t){e<0||e>=this.cells[0].length||this.cells.forEach((n,s)=>{const r=n[e];r&&(this.cells[s][e]={...r,enabled:t})})}toggleRow(e,t){e<0||e>=this.cells.length||this.cells[e].forEach((n,s)=>{n&&(this.cells[e][s]={...n,enabled:t})})}getCoordinatesByField(e){if(this.rowAccessors.length===1){const t=this.columnAccessors.indexOf(e);return t===-1?null:{row:0,col:t}}for(let t=0;t<this.rowAccessors.length;t++){const n=this.rowAccessors[t];if(n!==null&&e.startsWith(n))for(let s=0;s<this.columnAccessors.length;s++){const r=this.columnAccessors[s];if(r===null)continue;if(`${n}.${r}`===e)return{row:t,col:s}}}return null}getRowAccessor(e){if(e<0||e>=this.cells.length)return null;const n=this.cells[e].filter(l=>l!==null).map(l=>l.field.split("."));if(n.length===0)return null;let s=n[0];for(const l of n)if(s=s.filter((i,o)=>l[o]===i),s.length===0)break;const r=s.join(".");return r||null}getColumnAccessor(e){if(e<0||e>=this.cells[0].length)return null;const t=this.cells.map((r,l)=>{const i=r[e];if(!i)return null;const o=this.getRowAccessor(l);return o&&i.field.startsWith(o+".")?i.field.slice(o.length+1):null}).filter(r=>r!==null);if(t.length===0)return null;const n=t[0];return t.every(r=>r===n)?n:null}getValidMovement(e,t,n,s=!1){var i;const[r,l]=this._getDirectionDeltas(n);if(s)return this._getLastValidCellInDirection(e,t,r,l);{let o=e+r,c=t+l;for(;this._isValidPosition(o,c);){if(this.cells[o][c]!==null&&((i=this.cells[o][c])==null?void 0:i.enabled)!==!1)return{row:o,col:c};o+=r,c+=l}return{row:e,col:t}}}_isValidPosition(e,t,n){return n||(n=this.cells),e>=0&&e<n.length&&t>=0&&t<n[0].length}_getDirectionDeltas(e){switch(e){case"ArrowUp":return[-1,0];case"ArrowDown":return[1,0];case"ArrowLeft":return[0,-1];case"ArrowRight":return[0,1];default:return[0,0]}}_getLastValidCellInDirection(e,t,n,s){let r=e,l=t,i=e,o=t;for(;this._isValidPosition(r+n,l+s);)r+=n,l+=s,this.cells[r][l]!==null&&(i=r,o=l);return{row:i,col:o}}_populateCells(e,t){const n=Array.from({length:e.length},()=>Array(t.length).fill(null));return e.forEach((s,r)=>{t.forEach((l,i)=>{if(!this._isValidPosition(r,i,n))return;const{name:o,field:c,type:f,...a}=l.meta,m={row:s,column:{...l,meta:a}},h=c?c(m):null;!h||!f||(n[r][i]={field:h,type:f,enabled:!0})})}),n}},dr=class{constructor(e){V(this,"container"),this.container=e}getInput(e){var s;const t=this._getCellId(e),n=(s=this.container)==null?void 0:s.querySelector(`[data-cell-id="${t}"]`);return n||null}getInputByField(e){var n;const t=(n=this.container)==null?void 0:n.querySelector(`[data-field="${e}"]`);return t||null}getCoordinatesByField(e){var l;const t=(l=this.container)==null?void 0:l.querySelector(`[data-field="${e}"][data-cell-id]`);if(!t)return null;const n=t.getAttribute("data-cell-id");if(!n)return null;const[s,r]=n.split(":").map(i=>parseInt(i,10));return isNaN(s)||isNaN(r)?null:{row:s,col:r}}getContainer(e){var s;const t=this._getCellId(e),n=(s=this.container)==null?void 0:s.querySelector(`[data-container-id="${t}"]`);return n||null}_getCellId(e){return Lt(e)}},be=class{constructor({prev:e,next:t,setter:n}){V(this,"_prev"),V(this,"_next"),V(this,"_setter"),this._prev=e,this._next=t,this._setter=n}execute(){this._setter(this._next)}undo(){this._setter(this._prev)}redo(){this.execute()}},fr=({matrix:e,anchor:t,rangeEnd:n,setRangeEnd:s,isDragging:r,setIsDragging:l,isSelecting:i,setIsSelecting:o,setSingleRange:c,dragEnd:f,setDragEnd:a,setValue:m,execute:h,multiColumnSelection:v})=>{const b=u.useCallback(S=>O=>{c(S)},[c]),p=u.useCallback(S=>O=>{if(O.stopPropagation(),O.preventDefault(),O.shiftKey){s(S);return}o(!0),c(S)},[o,s,c]),x=u.useCallback(S=>{if(!(!r&&!i))return O=>{(t==null?void 0:t.col)!==S.col&&!v||(i?s(S):a(S))}},[t==null?void 0:t.col,r,i,a,s,v]),y=u.useCallback(S=>(O,G)=>{const T=new be({next:O,prev:G,setter:P=>{m(S,P,{shouldDirty:!0,shouldTouch:!0})}});h(T)},[m,h]),_=u.useCallback(S=>{l(!0)},[l]),w=u.useCallback(S=>!S||!t||!n?!1:e.getIsCellSelected(S,t,n),[t,n,e]),I=u.useCallback(S=>!S||!t||!f?!1:e.getIsCellSelected(S,t,f),[t,f,e]);return{getWrapperFocusHandler:b,getOverlayMouseDownHandler:p,getWrapperMouseOverHandler:x,getInputChangeHandler:y,getIsCellSelected:w,getIsCellDragSelected:I,onDragToFillStart:_}},hr=({matrix:e})=>{const t=u.useCallback(s=>{const{row:r,col:l}=s,i=Lt(s),o=e.getCellField(s),c=e.getCellType(s);if(!o||!c)throw new Error(`'field' or 'type' is null for cell ${i}`);return{id:i,field:o,type:c,inputAttributes:{"data-row":r,"data-col":l,"data-cell-id":i,"data-field":o},innerAttributes:{"data-container-id":i}}},[e]),n=u.useCallback(s=>{const r=e.getRowAccessor(s.row),l=e.getCellField(s);return{accessor:r,field:l}},[e]);return{getCellMetadata:t,getCellErrorMetadata:n}},mr=({matrix:e,form:t})=>{const[n,s]=u.useState(null),{getValues:r,setValue:l}=t,i=u.useCallback(c=>{if(!c)return null;const f=e.getCellField(c);if(!f)return null;const a=r(f);s(m=>(m==null?void 0:m.field)===f?m:{field:f,value:a})},[r,e]),o=u.useCallback(()=>{if(!n)return;const{field:c,value:f}=n;requestAnimationFrame(()=>{l(c,f)})},[l,n]);return{createSnapshot:i,restoreSnapshot:o}},pr=({matrix:e,anchor:t,rangeEnd:n,isEditing:s,getSelectionValues:r,setSelectionValues:l,execute:i})=>{const o=u.useCallback(f=>{var v;if(s||!t||!n)return;f.preventDefault();const a=e.getFieldsInSelection(t,n),h=r(a).map(b=>typeof b=="object"&&b!==null?JSON.stringify(b):`${b}`??"").join("	");(v=f.clipboardData)==null||v.setData("text/plain",h)},[s,t,n,e,r]),c=u.useCallback(f=>{var p;if(s||!t||!n)return;f.preventDefault();const a=(p=f.clipboardData)==null?void 0:p.getData("text/plain");if(!a)return;const m=a.split("	"),h=e.getFieldsInSelection(t,n),v=r(h),b=new ie({fields:h,next:m,prev:v,setter:l});i(b)},[s,t,n,e,r,l,i]);return{handleCopyEvent:o,handlePasteEvent:c}};function gr(e,t){const n=e.getAllLeafColumns(),s=n.map(c=>({id:c.id,name:br(c),checked:c.getIsVisible(),disabled:!c.getCanHide()})),r=u.useCallback(c=>f=>{const a=n[c];a.getCanHide()&&(t.toggleColumn(c,f),a.toggleVisibility(f))},[n,t]),l=u.useCallback(()=>{e.setColumnVisibility({})},[e]),o=s.filter(c=>!c.disabled).length===0;return{columnOptions:s,handleToggleColumn:r,handleResetColumns:l,isDisabled:o}}function br(e){const t=e.columnDef.id;e.columnDef.enableHiding;const n=e==null?void 0:e.columnDef.meta;if(!t)throw new Error("Column is missing an id, which is a required field. Please provide an id for the column.");return(n==null?void 0:n.name)||t}var tl=({duplicateOf:e})=>{const{control:t}=Be();return{watchedValue:pn({control:t,name:e})}},vr=(e,t,n)=>{const[s,r]=u.useState(!1),[l,i]=u.useState(null),{flatRows:o}=t.getRowModel(),c=t.getAllFlatColumns(),f=Zt(n),a=f.length,{rowsWithErrors:m,columnsWithErrors:h}=u.useMemo(()=>{const b=new Set,p=new Set;return f.forEach(x=>{const y=e.rowAccessors.findIndex(w=>w&&(x===w||x.startsWith(`${w}.`)));y!==-1&&b.add(y);const _=e.columnAccessors.findIndex(w=>w&&(x===w||x.endsWith(`.${w}`)));_!==-1&&p.add(_)}),{rowsWithErrors:b,columnsWithErrors:p}},[f,e.rowAccessors,e.columnAccessors]),v=u.useCallback((b,p,x,y)=>{if(s)l&&(x(l.rows),y(l.columns));else{i({rows:{...b},columns:{...p}});const _=o.map((I,S)=>m.has(S)?void 0:S).filter(I=>I!==void 0),w=c.map((I,S)=>!h.has(S)&&S!==0?I.id:void 0).filter(I=>I!==void 0);x(_.reduce((I,S)=>({...I,[S]:!1}),{})),y(w.reduce((I,S)=>({...I,[S]:!1}),{}))}r(_=>!_)},[s,l,o,c,m,h]);return{errorCount:a,isHighlighted:s,toggleErrorHighlighting:v}};function Zt(e,t=[]){return typeof e!="object"||e===null?[]:"message"in e&&"type"in e?[t.join(".")]:Object.entries(e).flatMap(([n,s])=>Zt(s,[...t,n]))}var wr=({matrix:e,form:t,anchor:n})=>{const{getValues:s,reset:r}=t,l=u.useCallback(o=>{if(!o.length)return[];const c=s();return o.map(f=>f.split(".").reduce((a,m)=>a==null?void 0:a[m],c))},[s]),i=u.useCallback(async(o,c,f)=>{if(!o.length||!n)return;const a=e.getCellType(n);if(!a)return;const m=jr(c,a),h=s();o.forEach((v,b)=>{if(!v)return;const p=b%c.length,x=m[p];Sr(h,v,x,a,f)}),r(h,{keepDirty:!0,keepTouched:!0,keepDefaultValues:!0})},[e,n,s,r]);return{getSelectionValues:l,setSelectionValues:i}};function xr(e){if(typeof e=="number")return e;const t=Number(e);if(isNaN(t))throw new Error(`String "${e}" cannot be converted to number.`);return t}function Cr(e){if(typeof e=="boolean")return e;if(typeof e>"u"||e===null)return!1;const t=e.toLowerCase();if(t==="true"||t==="false")return t==="true";throw new Error(`String "${e}" cannot be converted to boolean.`)}function yr(e){return typeof e>"u"||e===null?"":String(e)}function _r(e){let t=e;if(typeof t=="string")try{t=JSON.parse(t)}catch{throw new Error(`String "${e}" cannot be converted to object.`)}return t}function Sr(e,t,n,s,r){if(s!=="togglable-number"){Kt(e,t,n);return}Er(e,t,n,r)}function Er(e,t,n,s){const r=t.split(".").reduce((a,m)=>a==null?void 0:a[m],e),{disabledToggle:l}=r,i=a=>l&&a===""?0:a,o=a=>l?!0:a!==""&&a!=null,c=i(n.quantity),f=s?l?!0:n.checked:o(c);Kt(e,t,{...r,quantity:c,checked:f})}function jr(e,t){switch(t){case"number":return e.map(n=>n===""?n:n==null?"":xr(n));case"togglable-number":return e.map(_r);case"boolean":return e.map(Cr);case"text":return e.map(yr);default:throw new Error(`Unsupported target type "${t}".`)}}var kr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Mr=["ArrowUp","ArrowDown"],Dr=({containerRef:e,matrix:t,anchor:n,rangeEnd:s,isEditing:r,setTrapActive:l,scrollToCoordinates:i,setSingleRange:o,setRangeEnd:c,onEditingChangeHandler:f,getValues:a,setValue:m,execute:h,undo:v,redo:b,queryTool:p,getSelectionValues:x,setSelectionValues:y,restoreSnapshot:_,createSnapshot:w})=>{const I=u.useCallback(g=>{if(!n)return;const C=t.getCellType(n);if(r&&C!=="boolean")return;const M=Mr.includes(g.key)?"vertical":"horizontal",j=M==="horizontal"?n:g.shiftKey?s:n,D=M==="horizontal"?o:g.shiftKey?c:o;if(!j)return;const{row:z,col:F}=j,N=$=>{g.preventDefault(),g.stopPropagation(),i($,M),D($)},J=t.getValidMovement(z,F,g.key,g.metaKey||g.ctrlKey);N(J)},[r,n,s,i,o,c,t]),S=u.useCallback(g=>{if(!n)return;g.preventDefault(),g.stopPropagation();const{row:C,col:M}=n,j=g.shiftKey?"ArrowLeft":"ArrowRight",D="horizontal",z=t.getValidMovement(C,M,j,g.metaKey||g.ctrlKey);i(z,D),o(z)},[n,i,o,t]),O=u.useCallback(g=>{if(g.preventDefault(),g.shiftKey){b();return}v()},[b,v]),G=u.useCallback(g=>{const C=s??g,M=t.getFieldsInSelection(g,C),j=x(M),D=j.every(N=>N===!0),z=Array.from({length:j.length},()=>!D),F=new ie({fields:M,next:z,prev:j,setter:y});h(F)},[s,t,x,y,h]),T=u.useCallback(g=>{const C=t.getCellField(g),M=p==null?void 0:p.getInput(g);if(!C||!M)return;w(g);const j=a(C),D="",z=new be({next:D,prev:j,setter:F=>{m(C,F,{shouldDirty:!0,shouldTouch:!0})}});h(z),M.focus()},[t,p,a,h,m,w]),P=u.useCallback(g=>{const C=t.getCellField(g),M=p==null?void 0:p.getInput(g);if(!C||!M)return;w(g);const j=a(C);let D=j.checked;j.disabledToggle||(D=!1);const z={...j,quantity:"",checked:D},F=new be({next:z,prev:j,setter:N=>{m(C,N,{shouldDirty:!0,shouldTouch:!0})}});h(F),M.focus()},[t,p,a,h,m,w]),U=u.useCallback(g=>{if(!n||r)return;g.preventDefault();const C=t.getCellType(n);if(C)switch(C){case"boolean":G(n);break;case"togglable-number":P(n);break;case"number":case"text":T(n);break}},[n,r,t,G,T,P]),Z=u.useCallback((g,C)=>{const M=g.shiftKey?"ArrowUp":"ArrowDown",j=t.getValidMovement(C.row,C.col,M,!1);if(C.row!==j.row||C.col!==j.col)o(j),i(j,"vertical");else{const D=p==null?void 0:p.getContainer(C);D==null||D.focus()}f(!1)},[p,t,i,o,f]),ee=u.useCallback(g=>{const C=p==null?void 0:p.getInput(g);C&&(C.focus(),f(!0))},[p,f]),te=u.useCallback((g,C)=>{if(r){Z(g,C);return}ee(C)},[Z,ee,r]),ne=u.useCallback((g,C)=>{const M=t.getCellField(C);if(!M)return;const j=a(M);let D;typeof j=="boolean"?D=!j:D=!0;const z=new be({next:D,prev:j,setter:F=>{m(M,F,{shouldDirty:!0,shouldTouch:!0})}});h(z),Z(g,C)},[h,a,Z,t,m]),Y=u.useCallback(g=>{if(!n)return;switch(g.preventDefault(),t.getCellType(n)){case"togglable-number":case"text":case"number":te(g,n);break;case"boolean":{ne(g,n);break}}},[n,t,te,ne]),L=u.useCallback((g,C)=>{const M=t.getFieldsInSelection(g,C),j=x(M),D=j.map(F=>({...F,quantity:"",checked:F.disableToggle?F.checked:!1})),z=new ie({fields:M,next:D,prev:j,setter:y});h(z)},[t,x,y,h]),H=u.useCallback((g,C)=>{const M=t.getFieldsInSelection(g,C),j=x(M),D=Array.from({length:j.length},()=>""),z=new ie({fields:M,next:D,prev:j,setter:y});h(z)},[t,x,y,h]),le=u.useCallback((g,C)=>{const M=t.getFieldsInSelection(g,C),j=x(M),D=Array.from({length:j.length},()=>!1),z=new ie({fields:M,next:D,prev:j,setter:y});h(z)},[h,x,t,y]),E=u.useCallback(g=>{if(!n||!s||r)return;g.preventDefault();const C=t.getCellType(n);if(C)switch(C){case"text":case"number":H(n,s);break;case"boolean":le(n,s);break;case"togglable-number":L(n,s);break}},[n,s,r,t,H,le,L]),R=u.useCallback(g=>{if(!n||!r)return;g.preventDefault(),g.stopPropagation(),_();const C=p==null?void 0:p.getContainer(n);C==null||C.focus()},[p,r,n,_]),Q=u.useCallback(g=>{if(!e||r)return;const C=Ir(e),M=j=>{j&&(l(!1),j.focus())};switch(g.key){case".":M(C.cancel);break;case",":M(C.shortcuts);break}},[r,l,e]);return{handleKeyDownEvent:u.useCallback(g=>{if(kr.includes(g.key)){I(g);return}if(g.key==="z"&&(g.metaKey||g.ctrlKey)){O(g);return}if(g.key===" "){U(g);return}if(g.key==="Delete"||g.key==="Backspace"){E(g);return}if(g.key==="Enter"){Y(g);return}if(g.key==="Escape"){R(g);return}if(g.key==="Tab"){S(g);return}},[R,I,O,U,Y,E,S]),handleSpecialFocusKeys:Q}};function Ir(e){const t=Array.from(document.querySelectorAll("[tabindex], a, button, input, select, textarea")),n=t.indexOf(e.current),s=n>0?t[n-1]:null;let r=null;for(let l=n+1;l<t.length;l++)if(!e.current.contains(t[l])){r=t[l];break}return{shortcuts:s,cancel:r}}var Or=({matrix:e,anchor:t,dragEnd:n,setDragEnd:s,isDragging:r,setIsDragging:l,setRangeEnd:i,setIsSelecting:o,getSelectionValues:c,setSelectionValues:f,execute:a})=>{const m=u.useCallback(()=>{if(!r||!t||!n)return;const v=e.getFieldsInSelection(t,n),b=e.getCellField(t);if(!b||!v.length)return;const p=c([b]),x=v.filter(I=>I!==b),y=c(x),_=Array.from({length:y.length},()=>p[0]),w=new ie({fields:x,prev:y,next:_,setter:f});a(w),l(!1),s(null),i(n)},[r,t,n,e,c,f,a,l,s,i]);return{handleMouseUpEvent:u.useCallback(()=>{m(),o(!1)},[m,o])}},zr=({matrix:e,anchor:t,visibleColumns:n,visibleRows:s,columnVirtualizer:r,rowVirtualizer:l,setColumnVisibility:i,flatColumns:o,queryTool:c,setSingleRange:f})=>{const a=u.useCallback((h,v)=>{if(!t)return;const{row:b,col:p}=h,{row:x,col:y}=t,_=b>=x?"down":"up",w=p>=y?"right":"left";let I=_==="down"?b+1:b-1;s[I]===void 0&&(I=b);let S=w==="right"?p+1:p-1;n[S]===void 0&&(S=p);const O={align:"auto",behavior:"auto"};(v==="horizontal"||v==="both")&&r.scrollToIndex(S,O),(v==="vertical"||v==="both")&&l.scrollToIndex(I,O)},[t,r,s,l,n]),m=u.useCallback(h=>{const v=e.getCoordinatesByField(h);if(!v)return;const b=o[v.col];i(p=>({...p,[b.id]:!0})),requestAnimationFrame(()=>{a(v,"both"),f(v)}),requestAnimationFrame(()=>{const p=c==null?void 0:c.getInput(v);p&&p.focus()})},[e,o,i,a,f,c]);return{scrollToCoordinates:a,navigateToField:m}},Nr=e=>{const t=u.useRef(null);return u.useEffect(()=>{e.current&&(t.current=new dr(e.current))},[e]),t.current},Yt=({rowErrors:e})=>{const t=e?e.length:0;return!e||t<=0?null:d.jsx(Ke,{content:d.jsx("ul",{className:"flex flex-col gap-y-3",children:e.map((n,s)=>d.jsx(Ar,{error:n},s))}),delayDuration:0,children:d.jsx(mn,{color:"red",size:"2xsmall",className:"cursor-default",children:t})})},Ar=({error:e})=>{const{t}=ue();return d.jsxs("li",{className:"txt-compact-small flex flex-col items-start",children:[e.message,d.jsx("button",{type:"button",onClick:e.to,className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover transition-fg",children:t("dataGrid.errors.fixError")})]})},De=({isAnchor:e,isSelected:t,isDragSelected:n,field:s,showOverlay:r,placeholder:l,innerProps:i,overlayProps:o,children:c,errors:f,rowErrors:a,outerComponent:m})=>{const v=!!ve(f,s);return d.jsxs("div",{className:"group/container relative size-full",children:[d.jsxs("div",{className:q("bg-ui-bg-base group/cell relative flex size-full items-center gap-x-2 px-4 py-2.5 outline-none",{"bg-ui-tag-red-bg text-ui-tag-red-text":v&&!e&&!t&&!n,"ring-ui-bg-interactive ring-2 ring-inset":e,"bg-ui-bg-highlight [&:has([data-field]:focus)]:bg-ui-bg-base":t||e,"bg-ui-bg-subtle":n&&!e}),tabIndex:-1,...i,children:[d.jsx(Bs,{name:s,errors:f,render:({message:b})=>d.jsx("div",{className:"flex items-center justify-center",children:d.jsx(Ke,{content:b,delayDuration:0,children:d.jsx(St,{className:"text-ui-tag-red-icon z-[3]"})})})}),d.jsx("div",{className:"relative z-[1] flex size-full items-center justify-center",children:d.jsx(Fr,{isAnchor:e,placeholder:l,children:c})}),d.jsx(Yt,{rowErrors:a}),r&&d.jsx("div",{...o,"data-cell-overlay":"true",className:"absolute inset-0 z-[2]"})]}),m]})},Fr=({isAnchor:e,placeholder:t,children:n})=>!e&&t?t:n,Pr=({context:e,disabled:t})=>{const{field:n,control:s,renderProps:r}=Me({context:e}),l=de({context:e}),{container:i,input:o}=r;return d.jsx(_e,{control:s,name:n,render:({field:c})=>d.jsx(De,{...i,...l,children:d.jsx(Rr,{field:c,inputProps:o,disabled:t})})})},Rr=({field:e,inputProps:t,disabled:n})=>{const{ref:s,value:r,onBlur:l,name:i,disabled:o}=e,{ref:c,onBlur:f,onChange:a,onFocus:m,...h}=t,v=ke(s,c);return d.jsx(xn,{disabled:n||o,name:i,checked:r,onCheckedChange:b=>a(b===!0,r),onFocus:m,onBlur:()=>{l(),f()},ref:v,tabIndex:-1,...h})},$e=({context:e,code:t})=>{const{field:n,control:s,renderProps:r}=Me({context:e}),l=de({context:e}),{container:i,input:o}=r,c=cn[t.toUpperCase()];return d.jsx(_e,{control:s,name:n,render:({field:f})=>d.jsx(De,{...i,...l,children:d.jsx(Tr,{field:f,inputProps:o,currencyInfo:c})})})},Tr=({field:e,inputProps:t,currencyInfo:n})=>{const{value:s,onChange:r,onBlur:l,ref:i,...o}=e,{ref:c,onBlur:f,onFocus:a,onChange:m,...h}=t,v=u.useCallback(_=>{const w=typeof _=="number"?_.toString():_||"";return vn({value:w,decimalScale:n.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[n]),[b,p]=u.useState(s||""),x=(_,w,I)=>{if(!_){p("");return}p(_)};u.useEffect(()=>{let _=s;isNaN(Number(s))||(_=v(_)),p(_)},[s,v]);const y=ke(c,i);return d.jsxs("div",{className:"relative flex size-full items-center",children:[d.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,children:n.symbol_native}),d.jsx(wn,{...o,...h,ref:y,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-8 text-right outline-none",value:b||void 0,onValueChange:x,formatValueOnBlur:!0,onBlur:()=>{l(),f(),m(b,s)},onFocus:a,decimalScale:n.decimal_digits,decimalsLimit:n.decimal_digits,autoComplete:"off",tabIndex:-1})]})},Gr=({context:e,...t})=>{const{field:n,control:s,renderProps:r}=Me({context:e}),l=de({context:e}),{container:i,input:o}=r;return d.jsx(_e,{control:s,name:n,render:({field:c})=>d.jsx(De,{...i,...l,children:d.jsx($r,{field:c,inputProps:o,...t})})})},$r=({field:e,inputProps:t,...n})=>{const{ref:s,value:r,onChange:l,onBlur:i,...o}=e,{ref:c,onChange:f,onBlur:a,onFocus:m,...h}=t,[v,b]=u.useState(r);u.useEffect(()=>{b(r)},[r]);const p=ke(c,s);return d.jsx("div",{className:"size-full",children:d.jsx("input",{ref:p,value:v,onChange:x=>b(x.target.value),onBlur:()=>{i(),a(),f(v,r)},onFocus:m,type:"number",inputMode:"decimal",className:q("txt-compact-small size-full bg-transparent outline-none","placeholder:text-ui-fg-muted"),tabIndex:-1,...n,...o,...h})})},We=({context:e,color:t="muted",children:n})=>{const{rowErrors:s}=de({context:e});return d.jsxs("div",{className:q("txt-compact-small text-ui-fg-subtle flex size-full cursor-not-allowed items-center justify-between overflow-hidden px-4 py-2.5 outline-none",t==="muted"&&"bg-ui-bg-subtle",t==="normal"&&"bg-ui-bg-base"),children:[d.jsx("div",{className:"flex-1 truncate",children:n}),d.jsx(Yt,{rowErrors:s})]})},Wr=(e=20)=>{const[t,n]=u.useState([]),[s,r]=u.useState([]),l=t.length>0,i=s.length>0,o=u.useCallback(()=>{if(!l)return;const a=t[t.length-1],m=t.slice(0,t.length-1);a.undo(),n(m),r([a,...s.slice(0,e-1)])},[l,s,t,e]),c=u.useCallback(()=>{if(!i)return;const a=s[0],m=s.slice(1);a.redo(),n([...t,a].slice(0,e-1)),r(m)},[i,s,t,e]),f=u.useCallback(a=>{a.execute(),n(m=>[...m,a].slice(0,e-1)),r([])},[e]);return{undo:o,redo:c,execute:f,canUndo:l,canRedo:i}},Kr=()=>{const{t:e}=ue();return u.useMemo(()=>[{label:e("dataGrid.shortcuts.commands.undo"),keys:{Mac:["âŒ˜","Z"],Windows:["Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.redo"),keys:{Mac:["â‡§","âŒ˜","Z"],Windows:["Shift","Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.copy"),keys:{Mac:["âŒ˜","C"],Windows:["Ctrl","C"]}},{label:e("dataGrid.shortcuts.commands.paste"),keys:{Mac:["âŒ˜","V"],Windows:["Ctrl","V"]}},{label:e("dataGrid.shortcuts.commands.edit"),keys:{Mac:["â†µ"],Windows:["Enter"]}},{label:e("dataGrid.shortcuts.commands.delete"),keys:{Mac:["âŒ«"],Windows:["Backspace"]}},{label:e("dataGrid.shortcuts.commands.clear"),keys:{Mac:["Space"],Windows:["Space"]}},{label:e("dataGrid.shortcuts.commands.moveUp"),keys:{Mac:["â†‘"],Windows:["â†‘"]}},{label:e("dataGrid.shortcuts.commands.moveDown"),keys:{Mac:["â†“"],Windows:["â†“"]}},{label:e("dataGrid.shortcuts.commands.moveLeft"),keys:{Mac:["â†"],Windows:["â†"]}},{label:e("dataGrid.shortcuts.commands.moveRight"),keys:{Mac:["â†’"],Windows:["â†’"]}},{label:e("dataGrid.shortcuts.commands.moveTop"),keys:{Mac:["âŒ˜","â†‘"],Windows:["Ctrl","â†‘"]}},{label:e("dataGrid.shortcuts.commands.moveBottom"),keys:{Mac:["âŒ˜","â†“"],Windows:["Ctrl","â†“"]}},{label:e("dataGrid.shortcuts.commands.selectDown"),keys:{Mac:["â‡§","â†“"],Windows:["Shift","â†“"]}},{label:e("dataGrid.shortcuts.commands.selectUp"),keys:{Mac:["â‡§","â†‘"],Windows:["Shift","â†‘"]}},{label:e("dataGrid.shortcuts.commands.selectColumnDown"),keys:{Mac:["â‡§","âŒ˜","â†“"],Windows:["Shift","Ctrl","â†“"]}},{label:e("dataGrid.shortcuts.commands.selectColumnUp"),keys:{Mac:["â‡§","âŒ˜","â†‘"],Windows:["Shift","Ctrl","â†‘"]}},{label:e("dataGrid.shortcuts.commands.focusToolbar"),keys:{Mac:["âŒƒ","âŒ¥",","],Windows:["Ctrl","Alt",","]}},{label:e("dataGrid.shortcuts.commands.focusCancel"),keys:{Mac:["âŒƒ","âŒ¥","."],Windows:["Ctrl","Alt","."]}}],[e])},Vr=({open:e,onOpenChange:t})=>{const{t:n}=ue(),[s,r]=u.useState(""),l=Kr(),i=u.useMemo(()=>l.filter(o=>o.label.toLowerCase().includes(s.toLowerCase())),[s,l]);return d.jsxs(Sn,{open:e,onOpenChange:t,children:[d.jsx(En,{asChild:!0,children:d.jsx(ge,{size:"small",variant:"secondary",children:n("dataGrid.shortcuts.label")})}),d.jsxs(jn,{children:[d.jsx(kn,{className:q("bg-ui-bg-overlay fixed inset-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),d.jsxs(Mn,{className:"bg-ui-bg-subtle shadow-elevation-modal fixed left-[50%] top-[50%] flex h-full max-h-[612px] w-full max-w-[560px] translate-x-[-50%] translate-y-[-50%] flex-col divide-y overflow-hidden rounded-lg outline-none",children:[d.jsxs("div",{className:"flex flex-col gap-y-3 px-6 py-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx(Dn,{asChild:!0,children:d.jsx(In,{children:n("app.menus.user.shortcuts")})}),d.jsx(On,{className:"sr-only"})]}),d.jsxs("div",{className:"flex items-center gap-x-2",children:[d.jsx(ct,{children:"esc"}),d.jsx(zn,{asChild:!0,children:d.jsx(Nn,{variant:"transparent",size:"small",children:d.jsx(An,{})})})]})]}),d.jsx("div",{children:d.jsx(Fn,{type:"search",value:s,autoFocus:!0,onChange:o=>r(o.target.value)})})]}),d.jsx("div",{className:"flex flex-col divide-y overflow-y-auto",children:i.map((o,c)=>{var f;return d.jsxs("div",{className:"text-ui-fg-subtle flex items-center justify-between px-6 py-3",children:[d.jsx(Pn,{size:"small",children:o.label}),d.jsx("div",{className:"flex items-center gap-x-1",children:(f=o.keys.Mac)==null?void 0:f.map((a,m)=>d.jsx("div",{className:"flex items-center gap-x-1",children:d.jsx(ct,{children:a})},m))})]},c)})})]})]})]})},Hr=40,Qt=e=>{const t=e.getIsPinned(),s=document.documentElement.classList.contains("dark")?"rgb(50,50,53)":"rgb(228,228,231)";return{position:t?"sticky":"relative",width:e.getSize(),zIndex:t?1:0,borderBottom:t?`1px solid ${s}`:void 0,borderRight:t?`1px solid ${s}`:void 0,left:t==="left"?`${e.getStart("left")}px`:void 0,right:t==="right"?`${e.getAfter("right")}px`:void 0}},Lr=({data:e=[],columns:t,state:n,getSubRows:s,onEditingChange:r,disableInteractions:l,multiColumnSelection:i=!1})=>{var ot,it;const o=u.useRef(null),{redo:c,undo:f,execute:a}=Wr(),{register:m,control:h,getValues:v,setValue:b,formState:{errors:p}}=n,[x,y]=u.useState(!0),_=!l&&x,[w,I]=u.useState(null),[S,O]=u.useState(null),[G,T]=u.useState(null),[P,U]=u.useState(!1),[Z,ee]=u.useState(!1),[te,ne]=u.useState(!1),[Y,L]=u.useState({}),[H,le]=u.useState({}),E=gn({data:e,columns:t,initialState:{columnPinning:{left:[t[0].id]}},state:{columnVisibility:Y},onColumnVisibilityChange:L,getSubRows:s,getCoreRowModel:bn(),defaultColumn:{size:200,maxSize:400}}),{flatRows:R}=E.getRowModel(),Q=E.getAllFlatColumns(),X=u.useMemo(()=>R.filter((k,A)=>(H==null?void 0:H[A])!==!1),[R,H]),g=E.getVisibleLeafColumns(),C=yt({count:X.length,estimateSize:()=>Hr,getScrollElement:()=>o.current,overscan:5,rangeExtractor:k=>{const A=new Set(Array.from({length:k.endIndex-k.startIndex+1},(W,K)=>k.startIndex+K));return w&&X[w.row]&&A.add(w.row),S&&X[S.row]&&A.add(S.row),Array.from(A).sort((W,K)=>W-K)}}),M=C.getVirtualItems(),j=yt({count:g.length,estimateSize:k=>g[k].getSize(),getScrollElement:()=>o.current,horizontal:!0,overscan:3,rangeExtractor:k=>{const A=k.startIndex,W=k.endIndex,K=new Set(Array.from({length:W-A+1},(fe,B)=>A+B));return w&&g[w.col]&&K.add(w.col),S&&g[S.col]&&K.add(S.col),K.add(0),Array.from(K).sort((fe,B)=>fe-B)}}),D=j.getVirtualItems();let z,F;j&&(D!=null&&D.length)&&(z=((ot=D[0])==null?void 0:ot.start)??0,F=j.getTotalSize()-(((it=D[D.length-1])==null?void 0:it.end)??0));const N=u.useMemo(()=>new ur(R,t,i),[R,t,i]),J=Nr(o),$=u.useCallback(k=>{I(k),O(k)},[]),{errorCount:Xt,isHighlighted:Jt,toggleErrorHighlighting:Ue}=vr(N,E,p),qt=u.useCallback(()=>{Ue(H,Y,le,L)},[Ue,H,Y]),{columnOptions:en,handleToggleColumn:Ze,handleResetColumns:tn,isDisabled:nn}=gr(E,N),sn=u.useCallback(k=>Ze(k),[Ze]),{navigateToField:Ye,scrollToCoordinates:Ie}=zr({matrix:N,queryTool:J,anchor:w,columnVirtualizer:j,rowVirtualizer:C,flatColumns:Q,setColumnVisibility:L,setSingleRange:$,visibleColumns:g,visibleRows:X}),{createSnapshot:Oe,restoreSnapshot:rn}=mr({matrix:N,form:n}),ze=u.useCallback(k=>{r&&r(k),k&&Oe(w),ne(k)},[w,Oe,r]),{getSelectionValues:Ne,setSelectionValues:Ae}=wr({matrix:N,form:n,anchor:w}),{handleKeyDownEvent:Fe,handleSpecialFocusKeys:Qe}=Dr({containerRef:o,matrix:N,queryTool:J,anchor:w,rangeEnd:S,isEditing:te,setTrapActive:y,setRangeEnd:O,getSelectionValues:Ne,getValues:v,setSelectionValues:Ae,onEditingChangeHandler:ze,restoreSnapshot:rn,createSnapshot:Oe,setSingleRange:$,scrollToCoordinates:Ie,execute:a,undo:f,redo:c,setValue:b}),{handleMouseUpEvent:Pe}=Or({matrix:N,anchor:w,dragEnd:G,setDragEnd:T,isDragging:Z,setIsDragging:ee,setRangeEnd:O,setIsSelecting:U,getSelectionValues:Ne,setSelectionValues:Ae,execute:a}),{handleCopyEvent:Re,handlePasteEvent:Te}=pr({matrix:N,isEditing:te,anchor:w,rangeEnd:S,getSelectionValues:Ne,setSelectionValues:Ae,execute:a}),{getWrapperFocusHandler:Xe,getInputChangeHandler:Je,getOverlayMouseDownHandler:qe,getWrapperMouseOverHandler:et,getIsCellDragSelected:tt,getIsCellSelected:nt,onDragToFillStart:ln}=fr({matrix:N,anchor:w,rangeEnd:S,setRangeEnd:O,isDragging:Z,setIsDragging:ee,isSelecting:P,setIsSelecting:U,setSingleRange:$,dragEnd:G,setDragEnd:T,setValue:b,execute:a,multiColumnSelection:i}),{getCellErrorMetadata:st,getCellMetadata:rt}=hr({matrix:N});u.useEffect(()=>{if(_)return window.addEventListener("keydown",Fe),window.addEventListener("mouseup",Pe),window.addEventListener("copy",Re),window.addEventListener("paste",Te),()=>{window.removeEventListener("keydown",Fe),window.removeEventListener("mouseup",Pe),window.removeEventListener("copy",Re),window.removeEventListener("paste",Te)}},[_,Fe,Pe,Re,Te]),u.useEffect(()=>{const k=A=>{if(Ut(A)){Qe(A);return}};return window.addEventListener("keydown",k),()=>{window.removeEventListener("keydown",k)}},[Qe]);const on=u.useCallback(k=>{k&&y(!1)},[]);u.useEffect(()=>{w&&(S||O(w))},[w,S]),u.useEffect(()=>{if(!w&&N){const k=N.getFirstNavigableCell();k&&$(k)}},[w,N,$]);const an=u.useMemo(()=>({anchor:w,control:h,trapActive:_,errors:p,setTrapActive:y,setIsSelecting:U,setIsEditing:ze,setSingleRange:$,setRangeEnd:O,getWrapperFocusHandler:Xe,getInputChangeHandler:Je,getOverlayMouseDownHandler:qe,getWrapperMouseOverHandler:et,register:m,getIsCellSelected:nt,getIsCellDragSelected:tt,getCellMetadata:rt,getCellErrorMetadata:st,navigateToField:Ye}),[w,h,_,p,y,U,ze,$,O,Xe,Je,qe,et,m,nt,tt,rt,st,Ye]),lt=u.useCallback(()=>{w&&!_&&(y(!0),$(w),Ie(w,"both"),requestAnimationFrame(()=>{var k;(k=J==null?void 0:J.getContainer(w))==null||k.focus()}))},[w,_,$,Ie,J]);return d.jsx(Ht.Provider,{value:an,children:d.jsxs("div",{className:"bg-ui-bg-subtle flex size-full flex-col",children:[d.jsx(Br,{columnOptions:en,isDisabled:nn,onToggleColumn:sn,errorCount:Xt,onToggleErrorHighlighting:qt,onResetColumns:tn,isHighlighted:Jt,onHeaderInteractionChange:on}),d.jsx("div",{className:"size-full overflow-hidden",children:d.jsx("div",{ref:o,autoFocus:!0,tabIndex:0,className:"relative h-full select-none overflow-auto outline-none",onFocus:lt,onClick:lt,"data-container":!0,role:"application",children:d.jsxs("div",{role:"grid",className:"text-ui-fg-subtle grid",children:[d.jsx("div",{role:"rowgroup",className:"txt-compact-small-plus bg-ui-bg-subtle sticky top-0 z-[1] grid",children:E.getHeaderGroups().map(k=>d.jsxs("div",{role:"row",className:"flex h-10 w-full",children:[z?d.jsx("div",{role:"presentation",style:{display:"flex",width:z}}):null,D.reduce((A,W,K,fe)=>{const B=k.headers[W.index],he=fe[K-1];return he&&W.index!==he.index+1&&A.push(d.jsx("div",{role:"presentation",style:{display:"flex",width:`${W.start-he.end}px`}},`padding-${he.index}-${W.index}`)),A.push(d.jsx("div",{role:"columnheader","data-column-index":W.index,style:{width:B.getSize(),...Qt(B.column)},className:"bg-ui-bg-base txt-compact-small-plus flex items-center border-b border-r px-4 py-2.5",children:B.isPlaceholder?null:Et(B.column.columnDef.header,B.getContext())},B.id)),A},[]),F?d.jsx("div",{role:"presentation",style:{display:"flex",width:F}}):null]},k.id))}),d.jsx("div",{role:"rowgroup",className:"relative grid",style:{height:`${C.getTotalSize()}px`},children:M.map(k=>{const A=X[k.index],W=R.findIndex(K=>K.id===A.id);return d.jsx(Zr,{row:A,rowIndex:W,virtualRow:k,flatColumns:Q,virtualColumns:D,anchor:w,virtualPaddingLeft:z,virtualPaddingRight:F,onDragToFillStart:ln,multiColumnSelection:i},A.id)})})]})})})]})})},Br=({columnOptions:e,isDisabled:t,onToggleColumn:n,onResetColumns:s,isHighlighted:r,errorCount:l,onToggleErrorHighlighting:i,onHeaderInteractionChange:o})=>{const[c,f]=u.useState(!1),[a,m]=u.useState(!1),{t:h}=ue(),v=Cn(),b=e.some(y=>!y.checked),p=y=>{o(y),f(y)},x=y=>{o(y),m(y)};return d.jsxs("div",{className:"bg-ui-bg-base flex items-center justify-between border-b p-4",children:[d.jsxs("div",{className:"flex items-center gap-x-2",children:[d.jsxs(pe,{dir:v,open:a,onOpenChange:x,children:[d.jsx(yn,{showTooltip:t,content:h("dataGrid.columns.disabled"),children:d.jsx(pe.Trigger,{asChild:!0,disabled:t,children:d.jsxs(ge,{size:"small",variant:"secondary",children:[b?d.jsx(Mt,{}):d.jsx(_n,{}),h("dataGrid.columns.view")]})})}),d.jsx(pe.Content,{children:e.map((y,_)=>{const{checked:w,disabled:I,id:S,name:O}=y;return I?null:d.jsx(pe.CheckboxItem,{checked:w,onCheckedChange:n(_),onSelect:G=>G.preventDefault(),children:O},S)})})]}),b&&d.jsx(ge,{size:"small",variant:"transparent",type:"button",onClick:s,className:"text-ui-fg-muted hover:text-ui-fg-subtle","data-id":"reset-columns",children:h("dataGrid.columns.resetToDefault")})]}),d.jsxs("div",{className:"flex items-center gap-x-2",children:[l>0&&d.jsxs(ge,{size:"small",variant:"secondary",type:"button",onClick:i,className:q({"bg-ui-button-neutral-pressed":r}),children:[d.jsx(St,{className:"text-ui-fg-subtle"}),d.jsx("span",{children:h("dataGrid.errors.count",{count:l})})]}),d.jsx(Vr,{open:c,onOpenChange:p})]})]})},Ur=({cell:e,columnIndex:t,rowIndex:n,anchor:s,onDragToFillStart:r,multiColumnSelection:l})=>{const o=Bt({row:n,col:t},s);return d.jsx("div",{role:"gridcell","aria-rowindex":n,"aria-colindex":t,style:{width:e.column.getSize(),...Qt(e.column)},"data-row-index":n,"data-column-index":t,className:q("relative flex items-center border-b border-r p-0 outline-none"),tabIndex:-1,children:d.jsxs("div",{className:"relative h-full w-full",children:[Et(e.column.columnDef.cell,{...e.getContext(),columnIndex:t,rowIndex:n}),o&&d.jsx("div",{onMouseDown:r,className:q("bg-ui-fg-interactive absolute bottom-0 right-0 z-[3] size-1.5 cursor-ns-resize",{"cursor-nwse-resize":l})})]})})},Zr=({row:e,rowIndex:t,virtualRow:n,virtualPaddingLeft:s,virtualPaddingRight:r,virtualColumns:l,flatColumns:i,anchor:o,onDragToFillStart:c,multiColumnSelection:f})=>{const a=e.getVisibleCells();return d.jsxs("div",{role:"row","aria-rowindex":n.index,style:{transform:`translateY(${n.start}px)`},className:"bg-ui-bg-subtle txt-compact-small absolute flex h-10 w-full",children:[s?d.jsx("div",{role:"presentation",style:{display:"flex",width:s}}):null,l.reduce((m,h,v,b)=>{const p=a[h.index],x=p.column,y=i.findIndex(w=>w.id===x.id),_=b[v-1];return _&&h.index!==_.index+1&&m.push(d.jsx("div",{role:"presentation",style:{display:"flex",width:`${h.start-_.end}px`}},`padding-${_.index}-${h.index}`)),m.push(d.jsx(Ur,{cell:p,columnIndex:y,rowIndex:t,anchor:o,onDragToFillStart:c,multiColumnSelection:f},p.id)),m},[]),r?d.jsx("div",{role:"presentation",style:{display:"flex",width:r}}):null]})},Yr=({context:e})=>{const{field:t,control:n,renderProps:s}=Me({context:e}),r=de({context:e}),{container:l,input:i}=s;return d.jsx(_e,{control:n,name:t,render:({field:o})=>d.jsx(De,{...l,...r,children:d.jsx(Qr,{field:o,inputProps:i})})})},Qr=({field:e,inputProps:t})=>{const{onChange:n,onBlur:s,ref:r,value:l,...i}=e,{ref:o,onBlur:c,onChange:f,...a}=t,[m,h]=u.useState(l);u.useEffect(()=>{h(l)},[l]);const v=ke(o,r);return d.jsx("input",{className:q("txt-compact-small text-ui-fg-subtle flex size-full cursor-pointer items-center justify-center bg-transparent outline-none","focus:cursor-text"),autoComplete:"off",tabIndex:-1,value:m,onChange:b=>h(b.target.value),ref:v,onBlur:()=>{s(),c(),f(m,l)},...a,...i})},Xr=({isLoading:e,...t})=>{var n;return e?d.jsx(rr,{columns:t.columns,rows:(n=t.data)!=null&&n.length&&t.data.length>0?t.data.length:10}):d.jsx(Lr,{...t})},nl=Object.assign(Xr,{BooleanCell:Pr,TextCell:Yr,NumberCell:Gr,CurrencyCell:$e,ReadonlyCell:We});function Jr(){const e=hn();return{column:({id:t,name:n,header:s,cell:r,disableHiding:l=!1,field:i,type:o})=>e.display({id:t,header:s,cell:r,enableHiding:!l,meta:{name:n,field:i,type:o}})}}var _t=({includesTax:e})=>{const{t}=ue();return d.jsx(Ke,{maxWidth:999,content:t(e?"general.includesTaxTooltip":"general.excludesTaxTooltip"),children:e?d.jsx(At,{className:"text-ui-fg-muted shrink-0"}):d.jsx(Ot,{className:"text-ui-fg-muted shrink-0"})})},sl=({currencies:e,regions:t,pricePreferences:n,isReadyOnly:s,getFieldName:r,t:l})=>{const i=Jr();return[...(e==null?void 0:e.map(o=>{const c=n==null?void 0:n.find(a=>a.attribute==="currency_code"&&a.value===o),f=l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()});return i.column({id:`currency_prices.${o}`,name:l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()}),field:a=>(s==null?void 0:s(a))?null:r(a,o),type:"number",header:()=>d.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[d.jsx("span",{className:"truncate",title:f,children:f}),d.jsx(_t,{includesTax:c==null?void 0:c.is_tax_inclusive})]}),cell:a=>s!=null&&s(a)?d.jsx(We,{context:a}):d.jsx($e,{code:o,context:a})})}))??[],...(t==null?void 0:t.map(o=>{const c=n==null?void 0:n.find(a=>a.attribute==="region_id"&&a.value===o.id),f=l("fields.priceTemplate",{regionOrCurrency:o.name});return i.column({id:`region_prices.${o.id}`,name:l("fields.priceTemplate",{regionOrCurrency:o.name}),field:a=>(s==null?void 0:s(a))?null:r(a,o.id),type:"number",header:()=>d.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[d.jsx("span",{className:"truncate",title:f,children:f}),d.jsx(_t,{includesTax:c==null?void 0:c.is_tax_inclusive})]}),cell:a=>s!=null&&s(a)?d.jsx(We,{context:a}):(e==null?void 0:e.find(h=>h===o.currency_code))?d.jsx($e,{code:o.currency_code,context:a}):null})}))??[]]};export{nl as D,_t as I,sl as a,rr as b,Jr as c,We as d,Me as e,de as f,De as g,ke as h,tl as u};
